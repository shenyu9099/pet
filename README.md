# ğŸ¾ PetMoments - å® ç‰©æ—¶åˆ»åˆ†äº«å¹³å°

> åŸºäº Microsoft Azure äº‘æœåŠ¡çš„å® ç‰©ç¤¾äº¤å¹³å°  
> COM682 äº‘å¼€å‘è¯¾ç¨‹é¡¹ç›®

![Azure](https://img.shields.io/badge/Azure-0078D4?style=for-the-badge&logo=microsoft-azure&logoColor=white)
![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)
![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)
![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

**PetMoments** æ˜¯ä¸€ä¸ªäº‘åŸç”Ÿçš„å® ç‰©æ—¶åˆ»åˆ†äº«å¹³å°ï¼Œè®©å® ç‰©ä¸»äººå¯ä»¥ï¼š
- ğŸ“· åˆ†äº«å® ç‰©çš„ç…§ç‰‡ã€è§†é¢‘å’ŒéŸ³é¢‘
- ğŸ• åˆ›å»ºå® ç‰©æ¡£æ¡ˆå’Œæ—¥è®°
- ğŸ¤– ä½¿ç”¨ AI è‡ªåŠ¨è¯†åˆ«å® ç‰©åœºæ™¯
- ğŸ” æ™ºèƒ½æœç´¢æ„Ÿå…´è¶£çš„å†…å®¹
- â˜ï¸ å®‰å…¨å¯é çš„äº‘ç«¯å­˜å‚¨

### è®¾è®¡ç‰¹è‰²
- ğŸ¨ **å¤©è“è‰²ä¸»é¢˜** - Azure Blue é…è‰²æ–¹æ¡ˆ
- ğŸ¾ **å® ç‰©å…ƒç´ ** - çˆªå°ã€ç›¸æœºç­‰å¯çˆ±å›¾æ ‡
- ğŸ“± **å“åº”å¼è®¾è®¡** - æ”¯æŒæ‰‹æœºå’Œæ¡Œé¢ç«¯
- ğŸŒ **ä¸­æ–‡ç•Œé¢** - å®Œå…¨ä¸­æ–‡åŒ–çš„ç”¨æˆ·ä½“éªŒ

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯
- **HTML5** - é¡µé¢ç»“æ„
- **CSS3** - å¤©è“è‰²ä¸»é¢˜æ ·å¼
- **åŸç”Ÿ JavaScript** - äº¤äº’é€»è¾‘
- **Fetch API** - HTTP è¯·æ±‚

### åç«¯ (Azure æœåŠ¡)
- **Azure Logic Apps** - æ— æœåŠ¡å™¨ API (11ä¸ªç«¯ç‚¹)
- **Azure SQL Database** - ç”¨æˆ·ä¿¡æ¯å­˜å‚¨
- **Azure Cosmos DB** - å® ç‰©æ¡£æ¡ˆå’Œæ—¥è®° (NoSQL)
- **Azure Blob Storage** - åª’ä½“æ–‡ä»¶å­˜å‚¨
- **Azure AI Search** - æ™ºèƒ½æœç´¢å¼•æ“
- **Azure Computer Vision** - AI å›¾åƒè¯†åˆ«
- **Azure Event Grid** - äº‹ä»¶é©±åŠ¨æ¶æ„
- **Application Insights** - åº”ç”¨ç›‘æ§å’Œæ—¥å¿—è®°å½• ğŸ“Š

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ (HTML5)                          â”‚
â”‚          index.html | search.html | my-pets.html        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Azure Logic Apps (11ä¸ª)                     â”‚
â”‚  register | login | create-pet | create-moment | ...    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚          â”‚          â”‚          â”‚
      â–¼          â–¼          â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SQL    â”‚ â”‚ Cosmos   â”‚ â”‚   Blob   â”‚ â”‚  AI Search   â”‚
â”‚ Database â”‚ â”‚    DB    â”‚ â”‚ Storage  â”‚ â”‚              â”‚
â”‚  (Users) â”‚ â”‚(Pets+æ—¥è®°)â”‚ â”‚ (åª’ä½“)   â”‚ â”‚  (æœç´¢ç´¢å¼•)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â–²
                                              â”‚
                                        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                                        â”‚ Computer   â”‚
                                        â”‚  Vision    â”‚
                                        â”‚ (AIæ ‡è®°)   â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
PetMoments/
â”œâ”€â”€ index.html              # é¦–é¡µ
â”œâ”€â”€ search.html             # æœç´¢é¡µ
â”œâ”€â”€ my-pets.html            # æˆ‘çš„å® ç‰©é¡µ
â”œâ”€â”€ create-moment.html      # åˆ›å»ºæ—¥è®°é¡µ
â”œâ”€â”€ moment-detail.html      # æ—¥è®°è¯¦æƒ…é¡µ
â”‚
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ style.css           # ä¸»æ ·å¼ï¼ˆå¤©è“è‰²ä¸»é¢˜ï¼‰
â”‚   â””â”€â”€ search.css          # æœç´¢é¡µä¸“ç”¨æ ·å¼
â”‚
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ config.js           # API é…ç½®
â”‚   â”œâ”€â”€ auth.js             # ç”¨æˆ·è®¤è¯
â”‚   â”œâ”€â”€ api.js              # API è°ƒç”¨å°è£…
â”‚   â”œâ”€â”€ logger.js           # Application Insights æ—¥å¿—è®°å½•
â”‚   â”œâ”€â”€ app.js              # é¦–é¡µé€»è¾‘
â”‚   â””â”€â”€ search.js           # æœç´¢é¡µé€»è¾‘
â”‚
â”œâ”€â”€ logic-apps/             # Logic Apps é…ç½®
â”‚   â”œâ”€â”€ README.md           # Logic Apps éƒ¨ç½²è¯´æ˜
â”‚   â”œâ”€â”€ register-user.json  # ç”¨æˆ·æ³¨å†Œ
â”‚   â”œâ”€â”€ login-user.json     # ç”¨æˆ·ç™»å½•
â”‚   â”œâ”€â”€ create-pet.json     # åˆ›å»ºå® ç‰©
â”‚   â”œâ”€â”€ create-moment.json  # åˆ›å»ºæ—¥è®°
â”‚   â””â”€â”€ ...                 # å…¶ä»– Logic Apps
â”‚
â”œâ”€â”€ DEPLOYMENT_GUIDE.md          # å®Œæ•´éƒ¨ç½²æŒ‡å— â­
â”œâ”€â”€ APPLICATION_INSIGHTS_GUIDE.md # Application Insights ä½¿ç”¨æŒ‡å— ğŸ“Š
â””â”€â”€ README.md                    # æœ¬æ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Azure è´¦æˆ·ï¼ˆæœ‰æ•ˆè®¢é˜…ï¼‰
- Azure CLI å·¥å…·
- æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆVS Code æ¨èï¼‰
- æµè§ˆå™¨ï¼ˆChrome/Edge æ¨èï¼‰

### éƒ¨ç½²æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-repo/PetMoments.git
cd PetMoments
```

#### 2. åˆ›å»º Azure èµ„æº

**è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹ [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md)**

å¿«é€Ÿå‘½ä»¤ï¼š

```bash
# ç™»å½• Azure
az login

# åˆ›å»ºèµ„æºç»„
az group create --name PetMoments-RG --location uksouth

# åˆ›å»º SQL Database
az sql server create --name petmoments-sqlserver --resource-group PetMoments-RG --location uksouth --admin-user sqladmin --admin-password "YourPassword123!"
az sql db create --resource-group PetMoments-RG --server petmoments-sqlserver --name PetMomentsDB --service-objective Basic

# åˆ›å»º Cosmos DB
az cosmosdb create --name petmomentsdb --resource-group PetMoments-RG --locations regionName=uksouth
az cosmosdb sql database create --account-name petmomentsdb --resource-group PetMoments-RG --name PetMomentsDB
az cosmosdb sql container create --account-name petmomentsdb --database-name PetMomentsDB --name pets --partition-key-path "/userId"
az cosmosdb sql container create --account-name petmomentsdb --database-name PetMomentsDB --name petmoments --partition-key-path "/userId"

# åˆ›å»º Blob Storage
az storage account create --name petmomentsstorage --resource-group PetMoments-RG --location uksouth --sku Standard_LRS
az storage container create --name media --account-name petmomentsstorage --public-access blob

# åˆ›å»º AI Search
az search service create --name petmoments-search --resource-group PetMoments-RG --location uksouth --sku basic

# åˆ›å»º Computer Vision
az cognitiveservices account create --name petmoments-vision --resource-group PetMoments-RG --kind ComputerVision --sku S1 --location uksouth --yes
```

#### 3. åˆ›å»ºæ•°æ®åº“è¡¨

è¿æ¥åˆ° SQL Database å¹¶æ‰§è¡Œï¼š

```sql
CREATE TABLE Users (
    UserId NVARCHAR(50) PRIMARY KEY,
    Email NVARCHAR(255) NOT NULL UNIQUE,
    Name NVARCHAR(100) NOT NULL,
    PasswordHash NVARCHAR(255) NOT NULL,
    Avatar NVARCHAR(500),
    Bio NVARCHAR(500),
    CreatedAt DATETIME2 DEFAULT GETUTCDATE()
);
CREATE INDEX IX_Users_Email ON Users(Email);
```

#### 4. éƒ¨ç½² Logic Apps

åœ¨ Azure Portal ä¸­ï¼š
1. åˆ›å»º API Connections (SQL, Cosmos DB, Blob Storage)
2. ä¸ºæ¯ä¸ª JSON æ–‡ä»¶åˆ›å»º Logic App
3. å¤åˆ¶ Workflow URL

#### 5. é…ç½®å‰ç«¯

ç¼–è¾‘ `js/config.js`ï¼Œå¡«å…¥ Logic Apps çš„ URLï¼š

```javascript
const API_ENDPOINTS = {
    USERS: {
        REGISTER: 'https://prod-xx.uksouth.logic.azure.com/...',
        LOGIN: 'https://prod-xx.uksouth.logic.azure.com/...'
    },
    // ...
};
```

#### 6. éƒ¨ç½²å‰ç«¯

```bash
# æ–¹æ³• 1: Azure Static Web Apps
az staticwebapp create --name petmoments-web --resource-group PetMoments-RG --location uksouth

# æ–¹æ³• 2: Blob Storage é™æ€ç½‘ç«™
az storage blob service-properties update --account-name petmomentsstorage --static-website --index-document index.html
az storage blob upload-batch --account-name petmomentsstorage --source . --destination '$web'
```

#### 7. è®¿é—®åº”ç”¨

```
https://petmomentsstorage.z33.web.core.windows.net/
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·ç®¡ç†
- âœ… ç”¨æˆ·æ³¨å†Œï¼ˆå­˜å‚¨åœ¨ SQL Databaseï¼‰
- âœ… ç”¨æˆ·ç™»å½•ï¼ˆJWT æˆ– Sessionï¼‰
- âœ… ä¸ªäººèµ„æ–™ç®¡ç†

### 2. å® ç‰©æ¡£æ¡ˆ
- âœ… åˆ›å»ºå® ç‰©æ¡£æ¡ˆï¼ˆCosmos DBï¼‰
- âœ… å® ç‰©ä¿¡æ¯ï¼šåå­—ã€å“ç§ã€å¹´é¾„ã€ç…§ç‰‡
- âœ… æŸ¥çœ‹æˆ‘çš„å® ç‰©åˆ—è¡¨

### 3. å® ç‰©æ—¥è®°
- âœ… åˆ›å»ºæ—¥è®°ï¼ˆæ ‡é¢˜ã€æè¿°ã€æ ‡ç­¾ï¼‰
- âœ… ä¸Šä¼ ç…§ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘
- âœ… æµè§ˆæ‰€æœ‰æ—¥è®°
- âœ… æŸ¥çœ‹æ—¥è®°è¯¦æƒ…
- âœ… ç¼–è¾‘å’Œåˆ é™¤æ—¥è®°

### 4. AI æ™ºèƒ½åŠŸèƒ½ â­
- âœ… **è‡ªåŠ¨å›¾åƒè¯†åˆ«** - Computer Vision API
  - è¯†åˆ«å® ç‰©ç±»å‹ï¼ˆçŒ«ã€ç‹—ã€å…”å­ç­‰ï¼‰
  - è¯†åˆ«åœºæ™¯ï¼ˆç©è€ã€ç¡è§‰ã€åƒé¥­ï¼‰
  - è‡ªåŠ¨ç”Ÿæˆæè¿°
- âœ… **æ™ºèƒ½æœç´¢** - Azure AI Search
  - å…¨æ–‡æœç´¢
  - æŒ‰æ ‡ç­¾ç­›é€‰
  - æŒ‰å® ç‰©ç±»å‹ç­›é€‰
  - æŒ‰ AI è¯†åˆ«åœºæ™¯ç­›é€‰
  - æœç´¢å»ºè®®

### 5. äº‹ä»¶é©±åŠ¨
- âœ… Event Grid é›†æˆ
- âœ… ç…§ç‰‡ä¸Šä¼  â†’ è§¦å‘ AI æ ‡è®°
- âœ… æ—¥è®°åˆ›å»º â†’ æ›´æ–°æœç´¢ç´¢å¼•

### 6. åº”ç”¨ç›‘æ§ ğŸ“Š
- âœ… **Application Insights é›†æˆ**
  - è‡ªåŠ¨è®°å½•æ‰€æœ‰ API è¯·æ±‚
  - è®°å½•è¯·æ±‚è€—æ—¶å’Œå“åº”çŠ¶æ€
  - è¿½è¸ªç”¨æˆ·è¡Œä¸ºï¼ˆç™»å½•ã€æ³¨å†Œã€ç™»å‡ºï¼‰
  - è‡ªåŠ¨æ•è·é”™è¯¯å’Œå¼‚å¸¸
  - é¡µé¢æµè§ˆé‡ç»Ÿè®¡
  - å®æ—¶æ€§èƒ½ç›‘æ§
  - è¯¦ç»†ä½¿ç”¨æŒ‡å—: [APPLICATION_INSIGHTS_GUIDE.md](APPLICATION_INSIGHTS_GUIDE.md)

---

## ğŸ“Š æ•°æ®æ¨¡å‹

### SQL Database - Users
```sql
UserId (PK) | Email | Name | PasswordHash | Avatar | Bio | CreatedAt
```

### Cosmos DB - Pets
```json
{
  "id": "pet-001",
  "userId": "user-001",
  "petName": "å°ç™½",
  "species": "cat",
  "breed": "è‹±å›½çŸ­æ¯›çŒ«",
  "age": 2
}
```

### Cosmos DB - PetMoments
```json
{
  "id": "moment-001",
  "userId": "user-001",
  "petId": "pet-001",
  "title": "å°ç™½ä»Šå¤©ç©æ¯›çº¿çƒ",
  "media": {
    "photos": [...],
    "videos": [...],
    "audio": [...]
  },
  "tags": ["çŒ«å’ª", "ç©è€"],
  "aiTags": [{"name": "cat", "confidence": 0.98}],
  "aiScene": "playing"
}
```

---

## ğŸ’° æˆæœ¬ä¼°ç®—

| æœåŠ¡ | é…ç½® | æœˆæˆæœ¬ |
|------|------|--------|
| SQL Database | Basic (5 DTU) | $5 |
| Cosmos DB | 400 RU/s Ã— 2 | $24 |
| Blob Storage | 10GB | $2 |
| AI Search | Basic | $75 |
| Logic Apps | æ¶ˆè´¹è®¡åˆ’ | $1 |
| Computer Vision | S1 | $1 |
| **æ€»è®¡** | | **~$108/æœˆ** |

**å­¦ç”Ÿä¼˜æƒ **: ä½¿ç”¨ Azure for Students å¯è·å¾— $100 å…è´¹é¢åº¦

---

## ğŸ¨ UI è®¾è®¡

### é…è‰²æ–¹æ¡ˆï¼ˆå¤©è“è‰²ä¸»é¢˜ï¼‰
- **ä¸»è‰²**: `#0078D4` (Azure Blue)
- **è¾…åŠ©è‰²**: `#50E6FF` (æµ…è“)
- **å¼ºè°ƒè‰²**: `#FFB900` (æ©™é»„)
- **èƒŒæ™¯è‰²**: `#F3F2F1` (æµ…ç°)

### è®¾è®¡å…ƒç´ 
- ğŸ¾ çˆªå°å›¾æ ‡
- ğŸ“· ç›¸æœºå›¾æ ‡
- åœ†è§’å¡ç‰‡
- æ¸å˜èƒŒæ™¯
- æ‚¬æµ®åŠ¨ç”»

---

## ğŸ“¸ æˆªå›¾

### é¦–é¡µ
![é¦–é¡µ](docs/screenshots/home.png)

### æœç´¢é¡µ
![æœç´¢](docs/screenshots/search.png)

### æ—¥è®°è¯¦æƒ…
![è¯¦æƒ…](docs/screenshots/detail.png)

---

## ğŸ§ª æµ‹è¯•

### æ‰‹åŠ¨æµ‹è¯•

```bash
# æµ‹è¯•æ³¨å†Œ
curl -X POST https://your-logic-app-url/register \
  -H "Content-Type: application/json" \
  -d '{"name":"æµ‹è¯•ç”¨æˆ·","email":"test@test.com","password":"123456"}'

# æµ‹è¯•ç™»å½•
curl -X POST https://your-logic-app-url/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@test.com","password":"123456"}'
```

### æµè§ˆå™¨æµ‹è¯•
1. æ‰“å¼€ `index.html`
2. ç‚¹å‡»"ç™»å½•"æŒ‰é’®
3. æ³¨å†Œæ–°ç”¨æˆ·
4. åˆ›å»ºå® ç‰©æ¡£æ¡ˆ
5. å‘å¸ƒå® ç‰©æ—¥è®°
6. æµ‹è¯•æœç´¢åŠŸèƒ½

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: Logic App è¿”å› 500 é”™è¯¯**  
A: æ£€æŸ¥ API Connection æ˜¯å¦æ­£ç¡®é…ç½®ï¼ŒæŸ¥çœ‹è¿è¡Œå†å²ä¸­çš„è¯¦ç»†é”™è¯¯

**Q: CORS é”™è¯¯**  
A: ç¡®ä¿ Logic Apps å“åº”å¤´åŒ…å« `Access-Control-Allow-Origin: *`

**Q: å›¾ç‰‡æ— æ³•æ˜¾ç¤º**  
A: æ£€æŸ¥ Blob Storage å®¹å™¨çš„å…¬å…±è®¿é—®çº§åˆ«æ˜¯å¦è®¾ç½®ä¸º "Blob"

**Q: æœç´¢ä¸å·¥ä½œ**  
A: ç¡®è®¤ AI Search ç´¢å¼•å·²åˆ›å»ºï¼Œä¸” API Key æ­£ç¡®

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

### Azure å®˜æ–¹æ–‡æ¡£
- [Azure Logic Apps](https://learn.microsoft.com/azure/logic-apps/)
- [Azure Cosmos DB](https://learn.microsoft.com/azure/cosmos-db/)
- [Azure AI Search](https://learn.microsoft.com/azure/search/)
- [Azure Computer Vision](https://learn.microsoft.com/azure/cognitive-services/computer-vision/)
- [Azure Blob Storage](https://learn.microsoft.com/azure/storage/blobs/)

### è¯¾ç¨‹èµ„æº
- COM682 äº‘å¼€å‘è¯¾ç¨‹ææ–™
- Azure for Students: https://azure.microsoft.com/free/students/

---

## ğŸ‘¨â€ğŸ’» ä½œè€…

**å­¦ç”Ÿä¿¡æ¯**
- å§“å: [ä½ çš„å§“å]
- å­¦å·: B***
- è¯¾ç¨‹: COM682 äº‘å¼€å‘
- å­¦æœŸ: 2024/2025

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ç”¨äºæ•™è‚²ç›®çš„ã€‚

---

## ğŸ™ è‡´è°¢

- Microsoft Azure æä¾›çš„äº‘æœåŠ¡
- COM682 è¯¾ç¨‹å›¢é˜Ÿ
- æ‰€æœ‰å® ç‰©çˆ±å¥½è€… ğŸ¾

---

**ğŸ‰ å¼€å§‹ä½¿ç”¨ PetMomentsï¼Œåˆ†äº«ä½ çš„å® ç‰©æ—¶åˆ»å§ï¼**

